/**
 * License: MIT
 * Version: 2.0.1
 * Description: Simple and easy Input Spinner
 * Author: Tishuk Nadezda
 * Homepage: https://rainjeck.github.io/inumber2/
 */

{"version":3,"sources":["INumber.js"],"names":["INumber","selector","opts","console","error","params","document","querySelector","init","addEventListener","e","target","closest","down","up","body","elems","Array","from","querySelectorAll","start","inputEl","endValue","checkNewValue","value","change","parseFloat","forEach","item","buttonEl","wrapperEl","action","min","hasAttribute","getAttribute","max","step","isFixed","indexOf","substr","newValue","Number","isNaN","length","toFixed"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nclass INumber {\r\n\r\n  constructor(selector, opts) {\r\n\r\n    if (!selector) {\r\n      console.error(\"INumber: Selector not set\");\r\n      return;\r\n    }\r\n\r\n    this.selector = selector;\r\n\r\n    this.params = opts || {};\r\n\r\n    if ( !document.querySelector(selector) ) return;\r\n\r\n    this.init();\r\n\r\n    document.addEventListener('click', e => {\r\n      if ( e.target.closest('[data-inumber-down]') ) {\r\n\r\n        this.down( e.target.closest('[data-inumber-down]') );\r\n\r\n      } else if ( e.target.closest('[data-inumber-up]') ) {\r\n\r\n        this.up( e.target.closest('[data-inumber-up]') );\r\n\r\n      } else {\r\n        return;\r\n      }\r\n    });\r\n\r\n    document.body.addEventListener('change', e => {\r\n      const elems = Array.from(document.querySelectorAll(this.selector));\r\n\r\n      if (!elems) return;\r\n\r\n      this.start(elems);\r\n\r\n      const inputEl = e.target.closest('[data-inumber-input]');\r\n\r\n      if (!inputEl) return;\r\n\r\n      const endValue = this.checkNewValue(inputEl, e.target.value);\r\n\r\n      if (this.params && typeof this.params.change === \"function\") {\r\n        this.params.change( inputEl, parseFloat(endValue) );\r\n      }\r\n    });\r\n\r\n    document.body.addEventListener('focus', e => {\r\n      const inputEl = e.target.closest('[data-inumber-input]');\r\n\r\n      if (!inputEl) return;\r\n\r\n      if (inputEl.value == 0) {\r\n        inputEl.value = '';\r\n      }\r\n    }, true);\r\n\r\n    document.body.addEventListener('blur', e => {\r\n      const inputEl = e.target.closest('[data-inumber-input]');\r\n\r\n      if (!inputEl) return;\r\n\r\n      if (!inputEl.value) {\r\n        this.checkNewValue(inputEl, e.target.value);\r\n      }\r\n    }, true);\r\n  }\r\n\r\n  init() {\r\n    const elems = Array.from(document.querySelectorAll(this.selector));\r\n\r\n    this.start(elems);\r\n  }\r\n\r\n  start(elems) {\r\n    if (!elems) return;\r\n\r\n    elems.forEach(item => {\r\n      const inputEl = item.querySelector('[data-inumber-input]');\r\n      const value = parseFloat(inputEl.value);\r\n      this.checkNewValue(inputEl, value);\r\n    });\r\n  }\r\n\r\n  up(buttonEl) {\r\n    const wrapperEl = buttonEl.closest(this.selector);\r\n    const inputEl = wrapperEl.querySelector('[data-inumber-input]');\r\n\r\n    if ( !inputEl ) {\r\n      console.error(\"INumber: Input element not found\");\r\n      return;\r\n    }\r\n\r\n    const endValue = this.checkNewValue( inputEl, inputEl.value, 'up' );\r\n\r\n    if (this.params && typeof this.params.change === \"function\") {\r\n      this.params.change( inputEl, parseFloat(endValue) );\r\n    }\r\n  }\r\n\r\n  down(buttonEl) {\r\n    const wrapperEl = buttonEl.closest(this.selector);\r\n    const inputEl = wrapperEl.querySelector('[data-inumber-input]');\r\n\r\n    if ( !inputEl ) {\r\n      console.error(\"INumber: Input element not found\");\r\n      return;\r\n    }\r\n\r\n    const endValue = this.checkNewValue( inputEl, inputEl.value, 'down' );\r\n\r\n    if (this.params && typeof this.params.change === \"function\") {\r\n      this.params.change( inputEl, parseFloat(endValue) );\r\n    }\r\n  }\r\n\r\n  checkNewValue( inputEl, value, action = '' ) {\r\n    const min = (inputEl.hasAttribute('min')) ? parseFloat(inputEl.getAttribute('min')) : 0;\r\n    const max = (inputEl.hasAttribute('max')) ? parseFloat(inputEl.getAttribute('max')) : 1000000;\r\n    const step = (inputEl.hasAttribute('step')) ? inputEl.getAttribute('step') : 1;\r\n\r\n    const isFixed = (step && (step.indexOf('.') > 0) ) ? step.substr( step.indexOf('.') + 1 ) : 0;\r\n\r\n    let newValue = parseFloat(value);\r\n\r\n    if ( Number.isNaN(newValue) ) {\r\n      newValue = min;\r\n    }\r\n\r\n    if ( action == 'up' ) {\r\n      newValue = newValue + parseFloat(step);\r\n    }\r\n\r\n    if ( action == 'down' ) {\r\n      newValue = newValue - parseFloat(step);\r\n    }\r\n\r\n    if ( newValue < min ) {\r\n      newValue = min;\r\n    }\r\n\r\n    if ( newValue > max ) {\r\n      newValue = max;\r\n    }\r\n\r\n    if ( isFixed.length > 0 ) {\r\n      newValue = newValue.toFixed(isFixed.length);\r\n    }\r\n\r\n    inputEl.value = newValue;\r\n\r\n    return newValue;\r\n  }\r\n}\r\n\r\nexport default INumber;\r\n"],"file":"../src/inumber.js"}