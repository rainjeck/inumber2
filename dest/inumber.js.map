/**
 * License: MIT
 * Version: 2.0.1
 * Description: Simple and easy Input Spinner
 * Author: Tishuk Nadezda
 * Homepage: https://rainjeck.github.io/inumber2/
 */

{"version":3,"sources":["INumber.js"],"names":["INumber","selector","opts","console","error","params","document","querySelector","debounceChange","debounceKeyup","init","addEventListener","e","target","closest","down","up","body","debounce","inputEl","elems","Array","from","querySelectorAll","start","endValue","checkNewValue","value","change","parseFloat","keyup","forEach","item","buttonEl","wrapperEl","action","min","hasAttribute","getAttribute","max","step","isFixed","indexOf","substr","newValue","Number","isNaN","length","toFixed","func","timeout","timer","args","clearTimeout","setTimeout","apply"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nclass INumber {\r\n\r\n  constructor(selector, opts) {\r\n\r\n    if (!selector) {\r\n      console.error(\"INumber: Selector not set\");\r\n      return;\r\n    }\r\n\r\n    this.selector = selector;\r\n\r\n    this.params = opts || {};\r\n\r\n    if (!document.querySelector(selector)) return;\r\n\r\n    const debounceChange = (this.params && this.params.debounceChange) ? this.params.debounceChange : 300;\r\n    const debounceKeyup = (this.params && this.params.debounceKeyup) ? this.params.debounceKeyup : 300;\r\n\r\n    this.init();\r\n\r\n    document.addEventListener('click', e => {\r\n      if ( e.target.closest('[data-inumber-down]') ) {\r\n\r\n        this.down( e.target.closest('[data-inumber-down]') );\r\n\r\n      } else if ( e.target.closest('[data-inumber-up]') ) {\r\n\r\n        this.up( e.target.closest('[data-inumber-up]') );\r\n\r\n      } else {\r\n        return;\r\n      }\r\n    });\r\n\r\n    document.body.addEventListener('change', this.debounce(e => {\r\n      const inputEl = e.target.closest('[data-inumber-input]');\r\n\r\n      if (!inputEl) return;\r\n\r\n      const elems = Array.from(document.querySelectorAll(this.selector));\r\n\r\n      if (!elems) return;\r\n\r\n      this.start(elems);\r\n\r\n      const endValue = this.checkNewValue(inputEl, e.target.value);\r\n\r\n      if (this.params && typeof this.params.change === \"function\") {\r\n        this.params.change( inputEl, parseFloat(endValue) );\r\n      }\r\n    }, debounceChange));\r\n\r\n    document.body.addEventListener('keyup', this.debounce(e => {\r\n      const inputEl = e.target.closest('[data-inumber-input]');\r\n\r\n      if (!inputEl) return;\r\n\r\n      const elems = Array.from(document.querySelectorAll(this.selector));\r\n\r\n      if (!elems) return;\r\n\r\n      this.start(elems);\r\n\r\n      const endValue = this.checkNewValue(inputEl, e.target.value);\r\n\r\n      if (this.params && typeof this.params.keyup === \"function\") {\r\n        this.params.keyup( inputEl, parseFloat(endValue) );\r\n      }\r\n    }, debounceKeyup));\r\n\r\n    document.body.addEventListener('focus', e => {\r\n      const inputEl = e.target.closest('[data-inumber-input]');\r\n\r\n      if (!inputEl) return;\r\n\r\n      if (inputEl.value == 0) {\r\n        inputEl.value = '';\r\n      }\r\n    }, true);\r\n\r\n    document.body.addEventListener('blur', e => {\r\n      const inputEl = e.target.closest('[data-inumber-input]');\r\n\r\n      if (!inputEl) return;\r\n\r\n      if (!inputEl.value) {\r\n        this.checkNewValue(inputEl, e.target.value);\r\n      }\r\n    }, true);\r\n  }\r\n\r\n  init() {\r\n    const elems = Array.from(document.querySelectorAll(this.selector));\r\n\r\n    this.start(elems);\r\n  }\r\n\r\n  start(elems) {\r\n    if (!elems) return;\r\n\r\n    elems.forEach(item => {\r\n      const inputEl = item.querySelector('[data-inumber-input]');\r\n      const value = parseFloat(inputEl.value);\r\n\r\n      this.checkNewValue(inputEl, value);\r\n    });\r\n  }\r\n\r\n  up(buttonEl) {\r\n    const wrapperEl = buttonEl.closest(this.selector);\r\n    const inputEl = wrapperEl.querySelector('[data-inumber-input]');\r\n\r\n    if ( !inputEl ) {\r\n      console.error(\"INumber: Input element not found\");\r\n      return;\r\n    }\r\n\r\n    const endValue = this.checkNewValue( inputEl, inputEl.value, 'up' );\r\n\r\n    if (this.params && typeof this.params.change === \"function\") {\r\n      this.params.change( inputEl, parseFloat(endValue) );\r\n    }\r\n  }\r\n\r\n  down(buttonEl) {\r\n    const wrapperEl = buttonEl.closest(this.selector);\r\n    const inputEl = wrapperEl.querySelector('[data-inumber-input]');\r\n\r\n    if ( !inputEl ) {\r\n      console.error(\"INumber: Input element not found\");\r\n      return;\r\n    }\r\n\r\n    const endValue = this.checkNewValue( inputEl, inputEl.value, 'down' );\r\n\r\n    if (this.params && typeof this.params.change === \"function\") {\r\n      this.params.change( inputEl, parseFloat(endValue) );\r\n    }\r\n  }\r\n\r\n  checkNewValue( inputEl, value, action = '' ) {\r\n    const min = (inputEl.hasAttribute('min')) ? parseFloat(inputEl.getAttribute('min')) : 0;\r\n    const max = (inputEl.hasAttribute('max')) ? parseFloat(inputEl.getAttribute('max')) : 1000000;\r\n    const step = (inputEl.hasAttribute('step')) ? inputEl.getAttribute('step') : 1;\r\n\r\n    const isFixed = (step && (step.indexOf('.') > 0) ) ? step.substr( step.indexOf('.') + 1 ) : 0;\r\n\r\n    let newValue = parseFloat(value);\r\n\r\n    if ( Number.isNaN(newValue) ) {\r\n      newValue = min;\r\n    }\r\n\r\n    if ( action == 'up' ) {\r\n      newValue = newValue + parseFloat(step);\r\n    }\r\n\r\n    if ( action == 'down' ) {\r\n      newValue = newValue - parseFloat(step);\r\n    }\r\n\r\n    if ( newValue < min ) {\r\n      newValue = min;\r\n    }\r\n\r\n    if ( newValue > max ) {\r\n      newValue = max;\r\n    }\r\n\r\n    if ( isFixed.length > 0 ) {\r\n      newValue = newValue.toFixed(isFixed.length);\r\n    }\r\n\r\n    inputEl.value = newValue;\r\n\r\n    return newValue;\r\n  }\r\n\r\n  debounce(func, timeout = 300) {\r\n    let timer;\r\n\r\n    return (...args) => {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => { func.apply(this, args); }, timeout);\r\n    };\r\n  }\r\n}\r\n\r\nexport default INumber;\r\n"],"file":"../src/inumber.js"}