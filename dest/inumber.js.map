/**
 * License: MIT
 * Version: 2.0.0
 * Description: Simple and easy Input Spinner
 * Author: Tishuk Nadezda
 * Homepage: https://rainjeck.github.io/inumber2/
 */

{"version":3,"sources":["INumber.js"],"names":["INumber","selector","opts","console","error","params","document","querySelector","init","addEventListener","e","target","closest","down","up","elems","Array","from","querySelectorAll","forEach","item","i","inputEl","value","parseFloat","checkNewValue","endValue","change","buttonEl","wrapperEl","action","min","hasAttribute","getAttribute","max","step","isFixed","indexOf","substr","newValue","Number","isNaN","length","toFixed"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nclass INumber {\r\n\r\n  constructor(selector, opts) {\r\n\r\n    if (!selector) {\r\n      console.error(\"INumber: Selector not set\");\r\n      return;\r\n    }\r\n\r\n    this.selector = selector;\r\n\r\n    this.params = opts || {};\r\n\r\n    if ( !document.querySelector(selector) ) return;\r\n\r\n    this.init();\r\n\r\n    document.addEventListener('click', e => {\r\n      if ( e.target.closest('[data-inumber-down]') ) {\r\n\r\n        this.down( e.target.closest('[data-inumber-down]') );\r\n\r\n      } else if ( e.target.closest('[data-inumber-up]') ) {\r\n\r\n        this.up( e.target.closest('[data-inumber-up]') );\r\n\r\n      } else {\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  init() {\r\n    const elems = Array.from( document.querySelectorAll(this.selector) );\r\n\r\n    elems.forEach((item, i) => {\r\n      const inputEl = item.querySelector('[data-inumber-input]');\r\n      const value = parseFloat(inputEl.value);\r\n\r\n      this.checkNewValue(inputEl, value);\r\n\r\n      inputEl.addEventListener('change', e => {\r\n        const endValue = this.checkNewValue(inputEl, e.target.value);\r\n\r\n        if (this.params && typeof this.params.change === \"function\") {\r\n          this.params.change( inputEl, parseFloat(endValue) );\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  up(buttonEl) {\r\n    const wrapperEl = buttonEl.closest(this.selector);\r\n    const inputEl = wrapperEl.querySelector('[data-inumber-input]');\r\n\r\n    if ( !inputEl ) {\r\n      console.error(\"INumber: Input element not found\");\r\n      return;\r\n    }\r\n\r\n    const endValue = this.checkNewValue( inputEl, inputEl.value, 'up' );\r\n\r\n    if (this.params && typeof this.params.change === \"function\") {\r\n      this.params.change( inputEl, parseFloat(endValue) );\r\n    }\r\n  }\r\n\r\n  down(buttonEl) {\r\n    const wrapperEl = buttonEl.closest(this.selector);\r\n    const inputEl = wrapperEl.querySelector('[data-inumber-input]');\r\n\r\n    if ( !inputEl ) {\r\n      console.error(\"INumber: Input element not found\");\r\n      return;\r\n    }\r\n\r\n    const endValue = this.checkNewValue( inputEl, inputEl.value, 'down' );\r\n\r\n    if (this.params && typeof this.params.change === \"function\") {\r\n      this.params.change( inputEl, parseFloat(endValue) );\r\n    }\r\n  }\r\n\r\n  checkNewValue( inputEl, value, action = '' ) {\r\n    const min = (inputEl.hasAttribute('min')) ? parseFloat(inputEl.getAttribute('min')) : 0;\r\n    const max = (inputEl.hasAttribute('max')) ? parseFloat(inputEl.getAttribute('max')) : 1000000;\r\n    const step = (inputEl.hasAttribute('step')) ? inputEl.getAttribute('step') : 1;\r\n\r\n    const isFixed = (step && (step.indexOf('.') > 0) ) ? step.substr( step.indexOf('.') + 1 ) : 0;\r\n\r\n    let newValue = parseFloat(value);\r\n\r\n    if ( Number.isNaN(newValue) ) {\r\n      newValue = min;\r\n    }\r\n\r\n    if ( action == 'up' ) {\r\n      newValue = newValue + parseFloat(step);\r\n    }\r\n\r\n    if ( action == 'down' ) {\r\n      newValue = newValue - parseFloat(step);\r\n    }\r\n\r\n    if ( newValue < min ) {\r\n      newValue = min;\r\n    }\r\n\r\n    if ( newValue > max ) {\r\n      newValue = max;\r\n    }\r\n\r\n    if ( isFixed.length > 0 ) {\r\n      newValue = newValue.toFixed(isFixed.length);\r\n    }\r\n\r\n    inputEl.value = newValue;\r\n\r\n    return newValue;\r\n  }\r\n}\r\n\r\nexport default INumber;\r\n"],"file":"../src/inumber.js"}